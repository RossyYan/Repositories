"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_typeof=require("@babel/runtime/helpers/typeof"),_inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits")),_setPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/setPrototypeOf"));function _wrapRegExp(){_wrapRegExp=function(e,r){return new s(e,void 0,r)};var p=RegExp.prototype,n=new WeakMap;function s(e,r,t){r=new RegExp(e,r);return n.set(r,t||n.get(e)),(0,_setPrototypeOf2.default)(r,s.prototype)}function a(p,e){var a=n.get(e);return Object.keys(a).reduce(function(e,r){var t=a[r];if("number"==typeof t)e[r]=p[t];else{for(var s=0;void 0===p[t[s]]&&s+1<t.length;)s++;e[r]=p[t[s]]}return e},Object.create(null))}return(0,_inherits2.default)(s,RegExp),s.prototype.exec=function(e){var r,e=p.exec.call(this,e);return e&&(e.groups=a(e,this),r=e.indices)&&(r.groups=a(r,this)),e},s.prototype[Symbol.replace]=function(e,r){var t,s;return"string"==typeof r?(t=n.get(this),p[Symbol.replace].call(this,e,r.replace(/\$<([^>]+)>/g,function(e,r){r=t[r];return"$"+(Array.isArray(r)?r.join("$"):r)}))):"function"==typeof r?(s=this,p[Symbol.replace].call(this,e,function(){var e=arguments;return"object"!=_typeof(e[e.length-1])&&(e=[].slice.call(e)).push(a(e,s)),r.apply(this,e)})):p[Symbol.replace].call(this,e,r)},_wrapRegExp.apply(this,arguments)}var OHOS_THEME_PROP_GROUPS=require("./theme/ohosStyles");module.exports=function(e){for(var r,t=_wrapRegExp(/"?this\s*\.\$r\s*\(\s*((['"]ohos\.(\w+)['"]))\s*\)"?/g,{resName:3});r=t.exec(e);){var s=r.groups.resName;s&&OHOS_THEME_PROP_GROUPS[s]&&(s='"@ohos_id_'+OHOS_THEME_PROP_GROUPS[s]+'"',e=e.replace(r[0],s),t.lastIndex-=r[0].length-s.length)}for(var p=_wrapRegExp(/"?this\s*\.\$r\s*\(\s*((['"]sys\.(\w+)\.(\w+)['"]))\s*\)"?/g,{resType:3,resName:4});r=p.exec(e);){var a=r.groups.resName,n=r.groups.resType;a&&n&&OHOS_THEME_PROP_GROUPS[a]&&(n='"@sys.'+n+"."+OHOS_THEME_PROP_GROUPS[a]+'"',e=e.replace(r[0],n),p.lastIndex-=r[0].length-n.length)}for(var o=_wrapRegExp(/"?this\s*\.\$r\s*\(\s*((['"]app\.(\w+)\.(\w+)['"]))\s*\)"?/g,{resType:3,resName:4});r=o.exec(e);){var i=r.groups.resName,l=r.groups.resType;i&&l&&(e=e.replace(r[0],l='"@app.'+l+"."+i+'"'),o.lastIndex-=r[0].length-l.length)}return e};