"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_require=require("child_process"),exec=_require.exec,_path=require("path"),snapshot=_path.join(__dirname,"..","..","bin","jerry-snapshot"),SnapshotPlugin=function(){function t(e){(0,_classCallCheck2.default)(this,t),this.options=e}return(0,_createClass2.default)(t,[{key:"getDir",value:function(e,t){var a=[];return Object.keys(e).map(function(e){/.js$/.test(e)&&a.push(_path.join(t,e))}),a}},{key:"apply",value:function(e){var t=this,a=this.options.build;e.hooks.done.tap("snapshot coverter",function(e){t.getDir(e.compilation.assets,a).forEach(function(e){var t=e.replace(".js",".bc"),a=_path.basename(e);exec('"'.concat(snapshot,'" generate -o "').concat(t,'" "').concat(e,'"'),function(e){e&&console.error("[31m","Failed to convert the ".concat(a," file to a snapshot."),"[39m")})})})}}]),t}();module.exports=SnapshotPlugin;