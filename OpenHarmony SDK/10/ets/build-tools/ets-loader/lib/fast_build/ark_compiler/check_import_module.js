"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.checkIfJsImportingArkts=checkIfJsImportingArkts;var _module_source_file=require("./module/module_source_file"),_utils=require("./utils"),_ets_checker=require("../../ets_checker"),_ark_define=require("./common/ark_define");function _newArrowCheck(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")}function checkIfJsImportingArkts(t){var r=this;_module_source_file.ModuleSourceFile.getSourceFiles().forEach(function(e){var i=this;_newArrowCheck(this,r);const o=e.getModuleId();(0,_utils.isJsSourceFile)(o)&&-1===o.indexOf("/oh_modules/")&&(e=t.getModuleInfo(o).importedIdMaps,Object.values(e).forEach(function(e){var r;_newArrowCheck(this,i),(e.endsWith(_ark_define.EXTNAME_ETS)||e.endsWith(_ark_define.EXTNAME_D_ETS))&&(e=_ets_checker.compilerOptions.isCompatibleVersion?`ArkTS:WARN File: ${o}
`+`Importing ArkTS files in JS and TS files is about to be forbidden.
`:`ArkTS:ERROR ArkTS:ERROR File: ${o}
`+`Importing ArkTS files in JS and TS files is forbidden.
`,r=t.share.getLogger(_ark_define.GEN_ABC_PLUGIN_NAME),_ets_checker.compilerOptions.isCompatibleVersion?r.warn(_ark_define.yellow+e):r.error(_ark_define.red+e))}.bind(this)))}.bind(this))}