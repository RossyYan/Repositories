"use strict";var _validate_ui_syntax=require("./validate_ui_syntax"),_utils=require("./utils"),_pre_define=require("./pre_define"),_process_visual=require("./process_visual"),_component_map=require("./component_map");function preProcess(e){var t,r;return process.env.compiler=_pre_define.BUILD_ON,/\.ets$/.test(this.resourcePath)?(_utils.storedFileInfo.setCurrentArkTsFile(),clearCollection(),r=(t=(0,_validate_ui_syntax.sourceReplace)(e,this.resourcePath)).content,t=t.log.concat((0,_validate_ui_syntax.validateUISyntax)(e,r,this.resourcePath,this.resourceQuery)),r=(0,_process_visual.parseVisual)(this.resourcePath,this.resourceQuery,r,t,e),t.length&&(0,_utils.emitLogInfo)(this,t),r):(0,_validate_ui_syntax.processSystemApi)(e,!1,this.resourcePath)}function clearCollection(){_validate_ui_syntax.componentCollection.customComponents.clear(),_component_map.CUSTOM_BUILDER_METHOD.clear(),_component_map.GLOBAL_CUSTOM_BUILDER_METHOD.clear(),_component_map.INNER_CUSTOM_BUILDER_METHOD.clear()}module.exports=preProcess;