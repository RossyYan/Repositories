"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createParentParameter=createParentParameter,exports.createReference=createReference,exports.isProperty=isProperty,exports.processBuildMember=processBuildMember,exports.processComponentClass=processComponentClass;var _typescript=_interopRequireDefault(require("typescript")),_pre_define=require("./pre_define"),_component_map=require("./component_map"),_validate_ui_syntax=require("./validate_ui_syntax"),_process_component_constructor=require("./process_component_constructor"),_process_component_member=require("./process_component_member"),_process_component_build=require("./process_component_build"),_utils=require("./utils"),_main=require("../main"),_process_ui_syntax=require("./process_ui_syntax");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _newArrowCheck(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")}function processComponentClass(e,t,r,a){t=processMembers(e.members,e.name,t,r,a,checkPreview(e));return _typescript.default.factory.createClassDeclaration(void 0,e.modifiers,e.name,e.typeParameters,updateHeritageClauses(e,r),t)}function checkPreview(t){let r=!1;if(t&&t.decorators)for(let e=0;e<t.decorators.length;e++)if(t.decorators[e].getText().replace(/\([^\(\)]*\)/,"").trim()===_pre_define.COMPONENT_DECORATOR_PREVIEW){r=!0;break}return r}function processMembers(e,a,i,p,s,c){var o=this;const n={count:0};let _=(0,_process_component_constructor.getInitConstructor)(e,a);const d=[],f=new Map,y=[],l=[],u=[];const E=[],T={hasController:!_validate_ui_syntax.componentCollection.customDialogs.has(a.getText())},O=_typescript.default.factory.createInterfaceDeclaration(void 0,void 0,a.getText()+_pre_define.INTERFACE_NAME_SUFFIX,void 0,void 0,[]);return e.forEach(function(e){_newArrowCheck(this,o);let t;var r;_typescript.default.isPropertyDeclaration(e)&&(isStaticProperty(e)?(d.push(e),validateDecorators(e,p)):(addPropertyMember(e,d,s,a.getText(),p),r=(0,_process_component_member.processMemberVariableDecorators)(a,e,_,f,T,p,s,i,c,O),t=r.isItemUpdate()?r.getProperity():e,r.getVariableGet()&&d.push(r.getVariableGet()),r.getVariableSet()&&d.push(r.getVariableSet()),r.isCtorUpdate()&&(_=r.getCtor()),r.getUpdateParams()&&y.push(r.getUpdateParams()),r.getStateVarsParams()&&l.push(r.getStateVarsParams()),r.isDeleteParams()&&E.push(e),r.getControllerSet()&&d.push(r.getControllerSet()),processPropertyUnchanged(r,u))),(t=_typescript.default.isMethodDeclaration(e)&&e.name?processComponentMethod(e,a,i,p,n):t)&&d.push(t)}.bind(this)),_component_map.INTERFACE_NODE_SET.add(O),validateBuildMethodCount(n,a,p),validateHasController(a,T,p),_utils.storedFileInfo.getCurrentArkTsFile().recycleComponents.has(a.getText())&&d.unshift(addDeleteParamsFunc(E,!0)),d.unshift(addDeleteParamsFunc(E)),addIntoNewMembers(d,a,y,u,[],l),_main.partialUpdateConfig.partialUpdateMode&&(_=(0,_process_component_constructor.updateConstructor)(_,[],assignParams(a.getText()),!0)),d.unshift((0,_process_component_constructor.addConstructor)(_,f,a)),_process_component_member.curPropMap.clear(),d}function assignParams(e){return[_typescript.default.factory.createIfStatement(_typescript.default.factory.createBinaryExpression(_typescript.default.factory.createTypeOfExpression(_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_PARAMS_LAMBDA_FUNCTION)),_typescript.default.factory.createToken(_typescript.default.SyntaxKind.EqualsEqualsEqualsToken),_typescript.default.factory.createStringLiteral(_pre_define.FUNCTION)),_typescript.default.factory.createBlock([_typescript.default.factory.createExpressionStatement(_typescript.default.factory.createBinaryExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createThis(),_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_PARAMS_FUNCTION)),_typescript.default.factory.createToken(_typescript.default.SyntaxKind.EqualsToken),_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_PARAMS_LAMBDA_FUNCTION)))],!0))]}function isStaticProperty(e){var t=this;return e.modifiers&&e.modifiers.length&&e.modifiers.some(function(e){return _newArrowCheck(this,t),e.kind===_typescript.default.SyntaxKind.StaticKeyword}.bind(this))}function validateDecorators(t,r){var a=this;t.decorators&&t.decorators.length&&t.decorators.map(function(e){_newArrowCheck(this,a);e=e.getText();_pre_define.INNER_COMPONENT_MEMBER_DECORATORS.has(e)&&r.push({type:_utils.LogType.ERROR,message:"The static variable of struct cannot be used together with built-in decorators.",pos:t.getStart()})}.bind(this))}function processPropertyUnchanged(e,t){_main.partialUpdateConfig.partialUpdateMode&&e.getPurgeVariableDepStatement()&&t.push(e.getPurgeVariableDepStatement())}function addIntoNewMembers(e,t,r,a,i,p){_main.partialUpdateConfig.partialUpdateMode?(e.unshift(addInitialParamsFunc(r,t),addUpdateStateVarsFunc(p,t),addPurgeVariableDepFunc(a)),e.push(addRerenderFunc(i))):e.unshift(addUpdateParamsFunc(r,t))}function addPropertyMember(e,t,a,i,p){var s,c=e;let o;var n=c.type;if(c.decorators&&0!==c.decorators.length){if(c.decorators){for(let r=0;r<c.decorators.length;r++){let e,t=(s=c.decorators[r].getText().replace(/\(.*\)$/,"").trim(),!1);e=(_main.partialUpdateConfig.partialUpdateMode?createTypeReferencePU:createTypeReference)(s,n,p,a),s!==_pre_define.COMPONENT_LOCAL_STORAGE_LINK_DECORATOR&&s!==_pre_define.COMPONENT_LOCAL_STORAGE_PROP_DECORATOR||(t=!0);var _=createPropertyDeclaration(c,e,!1,t,i);(!o||_pre_define.INNER_COMPONENT_MEMBER_DECORATORS.has(s)&&s!==_pre_define.COMPONENT_WATCH_DECORATOR)&&(o=_)}o&&t.push(o)}}else o=createPropertyDeclaration(c,n,!0),t.push(o)}function createPropertyDeclaration(e,t,r,a=!1,i=null){let p="";r||(p="__");r=_typescript.default.factory.createModifier(_typescript.default.SyntaxKind.PrivateKeyword);return _typescript.default.factory.updatePropertyDeclaration(e,void 0,e.modifiers||[r],p+e.name.getText(),e.questionToken,t,a?createLocalStroageCallExpression(e,e.name.getText(),i):void 0)}function createLocalStroageCallExpression(e,t,r){var a=_validate_ui_syntax.localStorageLinkCollection.get(r).get(t),r=_validate_ui_syntax.localStoragePropCollection.get(r).get(t);let i;t=[_typescript.default.factory.createStringLiteral(a&&!r?Array.from(a)[0]:!a&&r?Array.from(r)[0]:_pre_define.COMPONENT_CONSTRUCTOR_UNDEFINED),e.initializer||_typescript.default.factory.createNumericLiteral(_pre_define.COMPONENT_CONSTRUCTOR_UNDEFINED),_typescript.default.factory.createThis(),_typescript.default.factory.createStringLiteral(t||_pre_define.COMPONENT_CONSTRUCTOR_UNDEFINED)];return _main.partialUpdateConfig.partialUpdateMode?(i=a&&!r?_pre_define.CREATE_LOCAL_STORAGE_LINK:_pre_define.CREATE_LOCAL_STORAGE_PROP,t.splice(-2,1)):i=a&&!r?_pre_define.COMPONENT_SET_AND_LINK:_pre_define.COMPONENT_SET_AND_PROP,_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_main.partialUpdateConfig.partialUpdateMode?_typescript.default.factory.createThis():_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createThis(),_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_CONSTRUCTOR_LOCALSTORAGE+"_")),_typescript.default.factory.createIdentifier(i)),[e.type],t)}function processComponentMethod(e,t,r,a,i){let p=e;var s=e.name.getText(),c=[];if(s===_pre_define.COMPONENT_BUILD_FUNCTION){i.count=i.count+1,e.parameters.length&&a.push({type:_utils.LogType.ERROR,message:"The 'build' method can not have arguments.",pos:e.getStart()});i=(0,_process_component_build.processComponentBuild)(e,a);p=processBuildMember(i,r,a)}else if(e.body&&_typescript.default.isBlock(e.body))if(s===_pre_define.COMPONENT_TRANSITION_FUNCTION)p=_typescript.default.factory.updateMethodDeclaration(e,e.decorators,e.modifiers,e.asteriskToken,e.name,e.questionToken,e.typeParameters,e.parameters,e.type,(0,_process_component_build.processComponentBlock)(e.body,!1,a,!0));else if((0,_utils.hasDecorator)(e,_pre_define.COMPONENT_BUILDER_DECORATOR,c)){_component_map.CUSTOM_BUILDER_METHOD.add(s),_component_map.INNER_CUSTOM_BUILDER_METHOD.add(s),_process_ui_syntax.builderTypeParameter.params=(0,_utils.getPossibleBuilderTypeParameter)(e.parameters);i=_typescript.default.factory.createNodeArray(Array.from(e.parameters)),c=(i.push(createParentParameter()),_typescript.default.factory.updateMethodDeclaration(e,c,e.modifiers,e.asteriskToken,e.name,e.questionToken,e.typeParameters,i,e.type,(0,_process_component_build.processComponentBlock)(e.body,!1,a,!1,!0)));_process_ui_syntax.builderTypeParameter.params=[],p=processBuildMember(c,r,a,!0)}else if((0,_utils.hasDecorator)(e,_pre_define.COMPONENT_STYLES_DECORATOR))return void(e.parameters&&0===e.parameters.length?_typescript.default.isBlock(e.body)&&e.body.statements&&e.body.statements.length&&(_component_map.INNER_STYLE_FUNCTION.set(s,e.body),_component_map.STYLES_ATTRIBUTE.add(s),_component_map.BUILDIN_STYLE_NAMES.add(s),_process_component_member.decoratorParamSet.add(_pre_define.STYLES)):a.push({type:_utils.LogType.ERROR,message:"@Styles can't have parameters.",pos:e.getStart()}));return p}function createParentParameter(){return _typescript.default.factory.createParameterDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_CONSTRUCTOR_PARENT),void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.NULL))}function processBuildMember(e,r,a,i=!1){return _typescript.default.visitNode(e,function e(t){isGeometryView(t)&&(t=processGeometryView(t,a));isProperty(t)&&(t=createReference(t,a,i));if(_typescript.default.isPropertyAccessExpression(t)&&_typescript.default.isIdentifier(t.name)&&_process_component_member.stateObjectCollection.has(p(t))&&t.parent&&_typescript.default.isCallExpression(t.parent)&&_typescript.default.isPropertyAccessExpression(t.parent.expression)&&t!==t.parent.expression&&t.parent.expression.name.escapedText.toString()!==_pre_define.FOREACH_GET_RAW_OBJECT)return _typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createIdentifier(_pre_define.FOREACH_OBSERVED_OBJECT),_typescript.default.factory.createIdentifier(_pre_define.FOREACH_GET_RAW_OBJECT)),void 0,[t]);return _typescript.default.visitEachChild(t,e,r)});function p(e){return e.expression&&!e.expression.expression&&e.name&&_typescript.default.isIdentifier(e.name)?e.name.escapedText.toString():null}}function isGeometryView(e){if(_typescript.default.isExpressionStatement(e)&&_typescript.default.isCallExpression(e.expression)){var e=e.expression,t=e.expression,e=e.arguments;if(_typescript.default.isPropertyAccessExpression(t)&&_typescript.default.isIdentifier(t.expression)&&t.expression.escapedText.toString()===_pre_define.GEOMETRY_VIEW&&_typescript.default.isIdentifier(t.name)&&t.name.escapedText.toString()===_pre_define.COMPONENT_CREATE_FUNCTION&&e&&1===e.length&&(_typescript.default.isArrowFunction(e[0])||_typescript.default.isFunctionExpression(e[0])))return!0}return!1}function processGeometryView(e,t){var r=e.expression,a=r.arguments[0];return _typescript.default.factory.updateExpressionStatement(e,_typescript.default.factory.updateCallExpression(r,r.expression,void 0,[_typescript.default.factory.createArrowFunction(void 0,void 0,a.parameters,void 0,_typescript.default.factory.createToken(_typescript.default.SyntaxKind.EqualsGreaterThanToken),getGeometryReaderFunctionBlock(a,t))]))}function getGeometryReaderFunctionBlock(e,t){let r;return _typescript.default.isBlock(e.body)?r=e.body:_typescript.default.isArrowFunction(e)&&_typescript.default.isCallExpression(e.body)&&(r=_typescript.default.factory.createBlock([_typescript.default.factory.createExpressionStatement(e.body)])),(0,_process_component_build.processComponentBlock)(r,!1,t)}function updateHeritageClauses(e,t){e.heritageClauses&&!checkHeritageClauses(e)&&t.push({type:_utils.LogType.ERROR,message:"The struct component is not allowed to extends other class or implements other interface.",pos:e.heritageClauses.pos});t=[],e=createHeritageClause();return t.push(e),_typescript.default.factory.createNodeArray(t)}function checkHeritageClauses(e){if(1===e.heritageClauses.length&&e.heritageClauses[0].types&&1===e.heritageClauses[0].types.length){e=e.heritageClauses[0].types[0];if(e.expression&&_typescript.default.isIdentifier(e.expression)&&e.expression.escapedText.toString()===_pre_define.CUSTOM_COMPONENT)return!0}return!1}function isProperty(e){if(judgmentParentType(e)){if(e.parent.parent.expression&&_typescript.default.isIdentifier(e.parent.parent.expression)&&!_component_map.BUILDIN_STYLE_NAMES.has(e.parent.parent.expression.escapedText.toString())&&_validate_ui_syntax.componentCollection.customComponents.has(e.parent.parent.expression.escapedText.toString()))return!0;if(_typescript.default.isPropertyAccessExpression(e.parent.parent.expression)&&_typescript.default.isIdentifier(e.parent.parent.expression.expression)&&_validate_ui_syntax.componentCollection.customComponents.has(e.parent.parent.expression.name.escapedText.toString()))return!0}return!1}function judgmentParentType(e){return _typescript.default.isPropertyAssignment(e)&&e.name&&_typescript.default.isIdentifier(e.name)&&e.parent&&_typescript.default.isObjectLiteralExpression(e.parent)&&e.parent.parent&&(_typescript.default.isCallExpression(e.parent.parent)||_typescript.default.isEtsComponentExpression(e.parent.parent))}function createReference(t,e,r=!1,a=!1,i=!1){var p=getParentNode(t,_validate_ui_syntax.linkCollection).slice(1),s=(getParentNode(t,_validate_ui_syntax.propCollection).slice(1),t.name);let c;var o=/^\$/g;if(!i||!_typescript.default.isShorthandPropertyAssignment(t)){var n=t.initializer;let e=!1;_typescript.default.isIdentifier(n)&&n.escapedText.toString().match(o)?c=n.escapedText.toString().replace(o,""):_typescript.default.isPropertyAccessExpression(n)&&n.expression&&n.expression.kind===_typescript.default.SyntaxKind.ThisKeyword&&_typescript.default.isIdentifier(n.name)&&n.name.escapedText.toString().match(o)?c=n.name.escapedText.toString().replace(o,""):r&&_typescript.default.isPropertyAccessExpression(n)&&n.expression&&_typescript.default.isIdentifier(n.expression)&&n.expression.escapedText.toString()===_pre_define.$$&&_typescript.default.isIdentifier(n.name)&&p.includes(s.escapedText.toString())?(e=!0,c=n.name.escapedText.toString()):isMatchInitExpression(n)&&p.includes(s.escapedText.toString())&&(c=n.name.escapedText.toString().replace(o,"")),c&&(t=addDoubleUnderline(t,s,c,e,a,i))}return t}function isMatchInitExpression(e){return _typescript.default.isPropertyAccessExpression(e)&&e.expression&&e.expression.kind===_typescript.default.SyntaxKind.ThisKeyword&&_typescript.default.isIdentifier(e.name)}function addDoubleUnderline(e,t,r,a=!1,i,p){return _typescript.default.factory.updatePropertyAssignment(e,t,_typescript.default.factory.createPropertyAccessExpression(a&&_main.partialUpdateConfig.partialUpdateMode?_typescript.default.factory.createIdentifier(_pre_define.$$):_typescript.default.factory.createThis(),i||p?_typescript.default.factory.createIdentifier(r):_typescript.default.factory.createIdentifier("__"+r)))}function getParentNode(e,t){e=e.parent.parent.expression;let r=new Set,a;return _typescript.default.isIdentifier(e)?(a=e.escapedText.toString(),r=t.get(a)):_typescript.default.isPropertyAccessExpression(e)&&(a=e.name.escapedText.toString(),r=t.get(a)),r=r||new Set,[a,...r]}function addUpdateParamsFunc(e,t){return createParamsInitBlock(_pre_define.COMPONENT_CONSTRUCTOR_UPDATE_PARAMS,e,t)}function addInitialParamsFunc(e,t){return createParamsInitBlock(_pre_define.COMPONENT_CONSTRUCTOR_INITIAL_PARAMS,e,t)}function addUpdateStateVarsFunc(e,t){return createParamsInitBlock(_pre_define.COMPONENT_UPDATE_STATE_VARS,e,t)}function addPurgeVariableDepFunc(e){return _typescript.default.factory.createMethodDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_CONSTRUCTOR_PURGE_VARIABLE_DEP),void 0,void 0,[_typescript.default.factory.createParameterDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.RMELMTID),void 0,void 0,void 0)],void 0,_typescript.default.factory.createBlock(e,!0))}function addDeleteParamsFunc(e,t=!1){var a=this;const i=[],p=[];return e.forEach(function(e){_newArrowCheck(this,a);var t=e.name;let r;_main.partialUpdateConfig.partialUpdateMode&&!e.decorators||(r=createParamsWithUnderlineStatement(t)),_main.partialUpdateConfig.partialUpdateMode&&e.decorators&&p.push(createElmtIdWithUnderlineStatement(t)),i.push(r)}.bind(this)),_main.partialUpdateConfig.partialUpdateMode&&t?createRecycleElmt(p):(e=_typescript.default.factory.createExpressionStatement(_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createIdentifier(_pre_define.CREATE_CONSTRUCTOR_SUBSCRIBER_MANAGER),_typescript.default.factory.createIdentifier(_pre_define.CREATE_CONSTRUCTOR_GET_FUNCTION)),void 0,[]),_typescript.default.factory.createIdentifier(_pre_define.CREATE_CONSTRUCTOR_DELETE_FUNCTION)),void 0,[_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createThis(),_typescript.default.factory.createIdentifier(_main.partialUpdateConfig.partialUpdateMode?_pre_define.ABOUT_TO_BE_DELETE_FUNCTION_ID__:_pre_define.ABOUT_TO_BE_DELETE_FUNCTION_ID)),void 0,[])])),i.push(e),_main.partialUpdateConfig.partialUpdateMode&&(t=createDeletedInternalStatement(),i.push(t)),createParamsInitBlock(_pre_define.COMPONENT_CONSTRUCTOR_DELETE_PARAMS,i))}function createRecycleElmt(e){return _typescript.default.factory.createMethodDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.UPDATE_RECYCLE_ELMT_ID),void 0,void 0,[_typescript.default.factory.createParameterDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.OLD_ELMT_ID)),_typescript.default.factory.createParameterDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.NEW_ELMT_ID))],void 0,_typescript.default.factory.createBlock(e,!0))}function createParamsWithUnderlineStatement(e){return _typescript.default.factory.createExpressionStatement(_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createThis(),_typescript.default.factory.createIdentifier("__"+e.escapedText.toString())),_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_CONSTRUCTOR_DELETE_PARAMS)),void 0,[]))}function createElmtIdWithUnderlineStatement(e){return _typescript.default.factory.createExpressionStatement(_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createThis(),_typescript.default.factory.createIdentifier("__"+e.escapedText.toString())),_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_UPDATE_ELMT_ID)),void 0,[_typescript.default.factory.createIdentifier(_pre_define.OLD_ELMT_ID),_typescript.default.factory.createIdentifier(_pre_define.NEW_ELMT_ID)]))}function createDeletedInternalStatement(){return _typescript.default.factory.createExpressionStatement(_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createThis(),_typescript.default.factory.createIdentifier(_pre_define.ABOUTTOBEDELETEDINTERNAL)),void 0,[]))}function addRerenderFunc(e){var t=_typescript.default.factory.createExpressionStatement(_typescript.default.factory.createCallExpression(_typescript.default.factory.createPropertyAccessExpression(_typescript.default.factory.createThis(),_typescript.default.factory.createIdentifier(_pre_define.UPDATEDIRTYELEMENTS)),void 0,[]));return e.push(t),_typescript.default.factory.createMethodDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(_pre_define.COMPONENT_RERENDER_FUNCTION),void 0,void 0,[],void 0,_typescript.default.factory.createBlock(e,!0))}function createParamsInitBlock(e,t,r){return _typescript.default.factory.createMethodDeclaration(void 0,void 0,void 0,_typescript.default.factory.createIdentifier(e),void 0,void 0,[_typescript.default.factory.createParameterDeclaration(void 0,void 0,void 0,e===_pre_define.COMPONENT_CONSTRUCTOR_DELETE_PARAMS?void 0:_typescript.default.factory.createIdentifier(_pre_define.CREATE_CONSTRUCTOR_PARAMS),void 0,e===_pre_define.COMPONENT_CONSTRUCTOR_DELETE_PARAMS?void 0:_typescript.default.factory.createTypeReferenceNode(_typescript.default.factory.createIdentifier(r.getText()+_pre_define.INTERFACE_NAME_SUFFIX),void 0),void 0)],void 0,_typescript.default.factory.createBlock(t,!0))}function validateBuildMethodCount(e,t,r){1!==e.count&&r.push({type:_utils.LogType.ERROR,message:`struct '${t.getText()}' must be at least or at most one 'build' method.`,pos:t.getStart()})}function validateHasController(e,t,r){t.hasController||r.push({type:_utils.LogType.ERROR,message:"@CustomDialog component should have a property of the CustomDialogController type.",pos:e.pos})}function createHeritageClause(){return _main.partialUpdateConfig.partialUpdateMode?_typescript.default.factory.createHeritageClause(_typescript.default.SyntaxKind.ExtendsKeyword,[_typescript.default.factory.createExpressionWithTypeArguments(_typescript.default.factory.createIdentifier(_pre_define.BASE_COMPONENT_NAME_PU),[])]):_typescript.default.factory.createHeritageClause(_typescript.default.SyntaxKind.ExtendsKeyword,[_typescript.default.factory.createExpressionWithTypeArguments(_typescript.default.factory.createIdentifier(_pre_define.BASE_COMPONENT_NAME),[])])}function createTypeReference(e,t,r,a){let i;switch(e){case _pre_define.COMPONENT_STATE_DECORATOR:case _pre_define.COMPONENT_PROVIDE_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode((0,_process_component_member.isSimpleType)(t,a,r)?_pre_define.OBSERVED_PROPERTY_SIMPLE:_pre_define.OBSERVED_PROPERTY_OBJECT,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_LINK_DECORATOR:case _pre_define.COMPONENT_CONSUME_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode((0,_process_component_member.isSimpleType)(t,a,r)?_pre_define.SYNCHED_PROPERTY_SIMPLE_TWO_WAY:_pre_define.SYNCHED_PROPERTY_SIMPLE_ONE_WAY,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_PROP_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.SYNCHED_PROPERTY_SIMPLE_ONE_WAY,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_OBJECT_LINK_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.SYNCHED_PROPERTY_NESED_OBJECT,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_STORAGE_PROP_DECORATOR:case _pre_define.COMPONENT_STORAGE_LINK_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.OBSERVED_PROPERTY_ABSTRACT,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_LOCAL_STORAGE_LINK_DECORATOR:case _pre_define.COMPONENT_LOCAL_STORAGE_PROP_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.OBSERVED_PROPERTY_ABSTRACT,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)])}return i}function createTypeReferencePU(e,t,r,a){let i;switch(e){case _pre_define.COMPONENT_STATE_DECORATOR:case _pre_define.COMPONENT_PROVIDE_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode((0,_process_component_member.isSimpleType)(t,a,r)?_pre_define.OBSERVED_PROPERTY_SIMPLE_PU:_pre_define.OBSERVED_PROPERTY_OBJECT_PU,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_LINK_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode((0,_process_component_member.isSimpleType)(t,a,r)?_pre_define.SYNCHED_PROPERTY_SIMPLE_TWO_WAY_PU:_pre_define.SYNCHED_PROPERTY_SIMPLE_ONE_WAY_PU,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_PROP_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.SYNCHED_PROPERTY_SIMPLE_ONE_WAY_PU,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_OBJECT_LINK_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.SYNCHED_PROPERTY_NESED_OBJECT_PU,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_CONSUME_DECORATOR:case _pre_define.COMPONENT_STORAGE_PROP_DECORATOR:case _pre_define.COMPONENT_STORAGE_LINK_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.OBSERVED_PROPERTY_ABSTRACT_PU,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)]);break;case _pre_define.COMPONENT_LOCAL_STORAGE_LINK_DECORATOR:case _pre_define.COMPONENT_LOCAL_STORAGE_PROP_DECORATOR:i=_typescript.default.factory.createTypeReferenceNode(_pre_define.OBSERVED_PROPERTY_ABSTRACT_PU,[t||_typescript.default.factory.createKeywordTypeNode(_typescript.default.SyntaxKind.AnyKeyword)])}return i}